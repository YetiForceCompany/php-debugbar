if(typeof(PhpDebugBar)=="undefined"){var PhpDebugBar={};PhpDebugBar.$=jQuery}(function(t){PhpDebugBar.Widgets={};var v=PhpDebugBar.Widgets.htmlize=function(a){return a.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;")};var o=PhpDebugBar.Widgets.renderValue=function(a,b){if(typeof(a)!=="string"){if(b){return v(JSON.stringify(a,undefined,2))}return JSON.stringify(a)}return a};var x=PhpDebugBar.Widgets.highlight=function(b,a){if(typeof(b)==="string"){if(typeof(hljs)==="undefined"){return v(b)}if(a){return hljs.highlight(a,b).value}return hljs.highlightAuto(b).value}if(typeof(hljs)==="object"){b.each(function(d,c){hljs.highlightBlock(c)})}return b};var q=PhpDebugBar.Widgets.createCodeBlock=function(c,a){var b=t("<pre />");t("<code />").text(c).appendTo(b);if(a){b.addClass("language-"+a)}x(b);return b};var w=PhpDebugBar.utils.makecsscls("phpdebugbar-widgets-");var p=PhpDebugBar.Widgets.ListWidget=PhpDebugBar.Widget.extend({tagName:"ul",className:w("list"),initialize:function(a){if(!a.itemRenderer){a.itemRenderer=this.itemRenderer}this.set(a)},render:function(){this.bindAttr(["itemRenderer","data"],function(){this.$el.empty();if(!this.has("data")){return}var a=this.get("data");for(var b=0;b<a.length;b++){var c=t("<li />").addClass(w("list-item")).appendTo(this.$el);this.get("itemRenderer")(c,a[b])}})},itemRenderer:function(b,a){b.html(o(a))}});var s=PhpDebugBar.Widgets.KVListWidget=p.extend({tagName:"dl",className:w("kvlist"),render:function(){this.bindAttr(["itemRenderer","data"],function(){this.$el.empty();if(!this.has("data")){return}var a=this;t.each(this.get("data"),function(d,b){var c=t("<dt />").addClass(w("key")).appendTo(a.$el);var e=t("<dd />").addClass(w("value")).appendTo(a.$el);a.get("itemRenderer")(c,e,d,b)})})},itemRenderer:function(b,d,c,a){b.text(c);d.html(v(a))}});var u=PhpDebugBar.Widgets.VariableListWidget=s.extend({className:w("kvlist varlist"),itemRenderer:function(b,f,d,a){t("<span />").attr("title",d).text(d).appendTo(b);var e=a;if(e&&e.length>100){e=e.substr(0,100)+"..."}var c=null;f.text(e).click(function(){if(f.hasClass(w("pretty"))){f.text(e).removeClass(w("pretty"))}else{c=c||q(a);f.addClass(w("pretty")).empty().append(c)}})}});var z=PhpDebugBar.Widgets.IFrameWidget=PhpDebugBar.Widget.extend({tagName:"iframe",className:w("iframe"),render:function(){this.$el.attr({seamless:"seamless",border:"0",width:"100%",height:"100%"});this.bindAttr("data",function(a){this.$el.attr("src",a)})}});var y=PhpDebugBar.Widgets.MessagesWidget=PhpDebugBar.Widget.extend({className:w("messages"),render:function(){var a=this;this.$list=new p({itemRenderer:function(e,c){var f=c.message;if(f.length>100){f=f.substr(0,100)+"..."}var b=t("<span />").addClass(w("value")).text(f).appendTo(e);if(!c.is_string||c.message.length>100){var d=c.message;if(!c.is_string){d=null}e.css("cursor","pointer").click(function(){if(b.hasClass(w("pretty"))){b.text(f).removeClass(w("pretty"))}else{d=d||q(c.message,"php");b.addClass(w("pretty")).empty().append(d)}})}if(c.label){b.addClass(w(c.label));t("<span />").addClass(w("label")).text(c.label).appendTo(e)}if(c.collector){t("<span />").addClass(w("collector")).text(c.collector).appendTo(e)}}});this.$list.$el.appendTo(this.$el);this.$toolbar=t('<div><i class="phpdebugbar-fa phpdebugbar-fa-search"></i></div>').addClass(w("toolbar")).appendTo(this.$el);t('<input type="text" />').on("change",function(){a.set("search",this.value)}).appendTo(this.$toolbar);this.bindAttr("data",function(b){this.set({exclude:[],search:""});this.$toolbar.find(w(".filter")).remove();var c=[],e=this;for(var d=0;d<b.length;d++){if(!b[d].label||t.inArray(b[d].label,c)>-1){continue}c.push(b[d].label);t("<a />").addClass(w("filter")).text(b[d].label).attr("rel",b[d].label).on("click",function(){e.onFilterClick(this)}).appendTo(this.$toolbar)}});this.bindAttr(["exclude","search"],function(){var b=this.get("data"),h=this.get("exclude"),e=this.get("search"),c=false,g=[];if(e&&e===e.toLowerCase()){c=true}for(var f=0;f<b.length;f++){var d=c?b[f].message.toLowerCase():b[f].message;if((!b[f].label||t.inArray(b[f].label,h)===-1)&&(!e||d.indexOf(e)>-1)){g.push(b[f])}}this.$list.set("data",g)})},onFilterClick:function(a){t(a).toggleClass(w("excluded"));var b=[];this.$toolbar.find(w(".filter")+w(".excluded")).each(function(){b.push(this.rel)});this.set("exclude",b)}});var r=PhpDebugBar.Widgets.TimelineWidget=PhpDebugBar.Widget.extend({tagName:"ul",className:w("timeline"),render:function(){this.bindAttr("data",function(a){this.$el.empty();if(a.measures){for(var i=0;i<a.measures.length;i++){var e=a.measures[i];var b=t("<div />").addClass(w("measure")),g=t("<li />"),c=(e.relative_start*100/a.duration).toFixed(2),d=Math.min((e.duration*100/a.duration).toFixed(2),100-c);b.append(t("<span />").addClass(w("value")).css({left:c+"%",width:d+"%"}));b.append(t("<span />").addClass(w("label")).text(e.label+" ("+e.duration_str+")"));if(e.collector){t("<span />").addClass(w("collector")).text(e.collector).appendTo(b)}b.appendTo(g);this.$el.append(g);if(e.params&&!t.isEmptyObject(e.params)){var f=t('<table><tr><th colspan="2">Params</th></tr></table>').addClass(w("params")).appendTo(g);for(var h in e.params){if(typeof e.params[h]!=="function"){f.append('<tr><td class="'+w("name")+'">'+h+'</td><td class="'+w("value")+'"><pre><code>'+e.params[h]+"</code></pre></td></tr>")}}g.css("cursor","pointer").click(function(){var j=t(this).find("table");if(j.is(":visible")){j.hide()}else{j.show()}})}}}})}});var n=PhpDebugBar.Widgets.ExceptionsWidget=PhpDebugBar.Widget.extend({className:w("exceptions"),render:function(){this.$list=new p({itemRenderer:function(c,a){t("<span />").addClass(w("message")).text(a.message).appendTo(c);if(a.file){t("<span />").addClass(w("filename")).text(a.file+"#"+a.line).appendTo(c)}if(a.type){t("<span />").addClass(w("type")).text(a.type).appendTo(c)}if(a.surrounding_lines){var b=q(a.surrounding_lines.join(""),"php").addClass(w("file")).appendTo(c);c.click(function(){if(b.is(":visible")){b.hide()}else{b.show()}})}}});this.$list.$el.appendTo(this.$el);this.bindAttr("data",function(a){this.$list.set("data",a);if(a.length==1){this.$list.$el.children().first().find(w(".file")).show()}})}})})(PhpDebugBar.$);